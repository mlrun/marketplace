
<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><meta content="Docutils 0.17.1: http://docutils.sourceforge.net/" name="generator"/>
<title>question_answering package</title>
<!-- Loaded before other Sphinx assets -->
<link href="../../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet"/>
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet"/>
<link href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css" rel="stylesheet"/>
<link as="font" crossorigin="" href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2" rel="preload" type="font/woff2"/>
<link as="font" crossorigin="" href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2" rel="preload" type="font/woff2"/>
<link href="../../../_static/pygments.css" rel="stylesheet" type="text/css">
<link href="../../../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" rel="stylesheet" type="text/css">
<link href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" rel="stylesheet" type="text/css">
<link href="../../../_static/togglebutton.css" rel="stylesheet" type="text/css">
<!-- Pre-loaded scripts that we'll load fully later -->
<link as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf" rel="preload"/>
<script src="../../../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
<script data-url_root="./" id="documentation_options" src="../../../_static/documentation_options.js"></script>
<script src="../../../_static/jquery.js"></script>
<script src="../../../_static/underscore.js"></script>
<script src="../../../_static/doctools.js"></script>
<script>let toggleHintShow = 'Click to show';</script>
<script>let toggleHintHide = 'Click to hide';</script>
<script>let toggleOpenOnPrint = 'true';</script>
<script src="../../../_static/togglebutton.js"></script>
<script src="../../../_static/scripts/sphinx-book-theme.js"></script>
<script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
<link href="genindex.html" rel="index" title="Index">
<link href="search.html" rel="search" title="Search">
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="en" name="docsearch:language"/>
<!-- Google Analytics -->
</link></link></link></link></link></link></head>
<body data-offset="60" data-spy="scroll" data-target="#bd-toc-nav">
<!-- Checkboxes to toggle the left sidebar -->
<input aria-label="Toggle navigation sidebar" class="sidebar-toggle" id="__navigation" name="__navigation" type="checkbox"/>
<label class="overlay overlay-navbar" for="__navigation">
<div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input aria-label="Toggle in-page Table of Contents" class="sidebar-toggle" id="__page-toc" name="__page-toc" type="checkbox"/>
<label class="overlay overlay-pagetoc" for="__page-toc">
<div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>
<div class="container-fluid" id="banner"></div>
<div class="container-xl">
<div class="row">
<!-- Sidebar -->
<div class="bd-sidebar noprint single-page" id="site-navigation">
</div>
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
<div class="header-article row sticky-top noprint">
<div class="col py-1 d-flex header-article-main">
<div class="header-article__left">
</div>
<div class="header-article__right">
<button class="headerbtn" data-placement="bottom" data-toggle="tooltip" onclick="toggleFullScreen()" title="Fullscreen mode">
<span class="headerbtn__icon-container">
<i class="fas fa-expand"></i>
</span>
</button>
<div class="menu-dropdown menu-dropdown-repository-buttons">
<button aria-label="Source repositories" class="headerbtn menu-dropdown__trigger">
<i class="fab fa-github"></i>
</button>
<div class="menu-dropdown__content">
<ul>
<li>
<a class="headerbtn" data-placement="left" data-toggle="tooltip" href="https://github.com/mlrun/marketplace" title="Source repository">
<span class="headerbtn__icon-container">
<i class="fab fa-github"></i>
</span>
<span class="headerbtn__text-container">repository</span>
</a>
</li>
<li>
<a class="headerbtn" data-placement="left" data-toggle="tooltip" href="https://github.com/mlrun/marketplace/issues/new?title=Issue%20on%20page%20%2Fquestion_answering.html&amp;body=Your%20issue%20content%20here." title="Open an issue">
<span class="headerbtn__icon-container">
<i class="fas fa-lightbulb"></i>
</span>
<span class="headerbtn__text-container">open issue</span>
</a>
</li>
<li>

</li>
</ul>
</div>
</div>
<div class="menu-dropdown menu-dropdown-download-buttons">
<button aria-label="Download this page" class="headerbtn menu-dropdown__trigger">
<i class="fas fa-download"></i>
</button>
<div class="menu-dropdown__content">
<ul>
<li>

</li>
<li>
<button class="headerbtn" data-placement="left" data-toggle="tooltip" onclick="printPdf(this)" title="Print to PDF">
<span class="headerbtn__icon-container">
<i class="fas fa-file-pdf"></i>
</span>
<span class="headerbtn__text-container">.pdf</span>
</button>
</li>
</ul>
</div>
</div>
<label class="headerbtn headerbtn-page-toc" for="__page-toc">
<span class="headerbtn__icon-container">
<i class="fas fa-list"></i>
</span>
</label>
</div>
</div>
<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
<div class="tocsection onthispage pt-5 pb-3">
<i class="fas fa-list"></i> Contents
    </div>
<nav aria-label="Page" id="bd-toc-nav">
<ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#submodules">
   Submodules
  </a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#module-question_answering.question_answering">
   question_answering.question_answering module
  </a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#module-question_answering">
   Module contents
  </a>
</li>
</ul>
</nav>
</div>
</div>
<div class="article row">
<div class="col pl-md-3 pl-lg-5 content-container">
<!-- Table of contents that is only displayed when printing the page -->
<div class="onlyprint" id="jb-print-docs-body">
<h1>question_answering package</h1>
<!-- Table of contents -->
<div id="print-main-content">
<div id="jb-print-toc">
<div>
<h2> Contents </h2>
</div>
<nav aria-label="Page">
<ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#submodules">
   Submodules
  </a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#module-question_answering.question_answering">
   question_answering.question_answering module
  </a>
</li>
<li class="toc-h2 nav-item toc-entry">
<a class="reference internal nav-link" href="#module-question_answering">
   Module contents
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<main id="main-content" role="main">
<div>
<section id="question-answering-package">
<h1>question_answering package<a class="headerlink" href="#question-answering-package" title="Permalink to this headline">#</a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">#</a></h2>
</section>
<section id="module-question_answering.question_answering">
<span id="question-answering-question-answering-module"></span><h2>question_answering.question_answering module<a class="headerlink" href="#module-question_answering.question_answering" title="Permalink to this headline">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="question_answering.question_answering.PollQuestionHandler">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">question_answering.question_answering.</span></span><span class="sig-name descname"><span class="pre">PollQuestionHandler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">poll_count</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">poll_strategy</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'most_common'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="question_answering.html#PollQuestionHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#question_answering.question_answering.PollQuestionHandler" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#question_answering.question_answering.QuestionHandler" title="question_answering.question_answering.QuestionHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">question_answering.question_answering.QuestionHandler</span></code></a></p>
<p>Static class to hold all the possible poll question configurations options keys</p>
<dl class="py class">
<dt class="sig sig-object py" id="question_answering.question_answering.PollQuestionHandler.ConfigKeys">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">ConfigKeys</span></span><a class="reference internal" href="question_answering.html#PollQuestionHandler.ConfigKeys"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#question_answering.question_answering.PollQuestionHandler.ConfigKeys" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class for handling questions answering for poll type questions.
These type of question are answered by asking the same question multiple times
and choosing the most common answer or the average answer.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="question_answering.question_answering.PollQuestionHandler.ConfigKeys.POLL_COUNT">
<span class="sig-name descname"><span class="pre">POLL_COUNT</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'poll_count'</span></em><a class="headerlink" href="#question_answering.question_answering.PollQuestionHandler.ConfigKeys.POLL_COUNT" title="Permalink to this definition">#</a></dt>
<dd><p>The number of times to ask the same question.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="question_answering.question_answering.PollQuestionHandler.ConfigKeys.POLL_STRATEGY">
<span class="sig-name descname"><span class="pre">POLL_STRATEGY</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'poll_strategy'</span></em><a class="headerlink" href="#question_answering.question_answering.PollQuestionHandler.ConfigKeys.POLL_STRATEGY" title="Permalink to this definition">#</a></dt>
<dd><p>The strategy to use for choosing the answer from the poll.</p>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py" id="question_answering.question_answering.PollQuestionHandler.Strategy">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">Strategy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="question_answering.html#PollQuestionHandler.Strategy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#question_answering.question_answering.PollQuestionHandler.Strategy" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></p>
<p>An enumeration.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="question_answering.question_answering.PollQuestionHandler.Strategy.AVERAGE">
<span class="sig-name descname"><span class="pre">AVERAGE</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'average'</span></em><a class="headerlink" href="#question_answering.question_answering.PollQuestionHandler.Strategy.AVERAGE" title="Permalink to this definition">#</a></dt>
<dd><p>The average answer strategy.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="question_answering.question_answering.PollQuestionHandler.Strategy.MOST_COMMON">
<span class="sig-name descname"><span class="pre">MOST_COMMON</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'most_common'</span></em><a class="headerlink" href="#question_answering.question_answering.PollQuestionHandler.Strategy.MOST_COMMON" title="Permalink to this definition">#</a></dt>
<dd><p>The most common answer strategy.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="question_answering.question_answering.PollQuestionHandler.Strategy.average">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">average</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">answers</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="question_answering.html#PollQuestionHandler.Strategy.average"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#question_answering.question_answering.PollQuestionHandler.Strategy.average" title="Permalink to this definition">#</a></dt>
<dd><p>Calculate the average answer for a given list of answers.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="question_answering.question_answering.PollQuestionHandler.Strategy.do">
<span class="sig-name descname"><span class="pre">do</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">answers</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="question_answering.html#PollQuestionHandler.Strategy.do"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#question_answering.question_answering.PollQuestionHandler.Strategy.do" title="Permalink to this definition">#</a></dt>
<dd><p>Perform the strategy.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="question_answering.question_answering.PollQuestionHandler.Strategy.most_common">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">most_common</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">answers</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="question_answering.html#PollQuestionHandler.Strategy.most_common"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#question_answering.question_answering.PollQuestionHandler.Strategy.most_common" title="Permalink to this definition">#</a></dt>
<dd><p>Calculate the most common answer for a given list of answers.</p>
</dd></dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="question_answering.question_answering.PollQuestionHandler.answer">
<span class="sig-name descname"><span class="pre">answer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">questions_amount</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batched_input</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_pipeline</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">transformers.Pipeline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_config</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">transformers.GenerationConfig</span></span></em><span class="sig-paren">)</span> → <span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="question_answering.html#PollQuestionHandler.answer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#question_answering.question_answering.PollQuestionHandler.answer" title="Permalink to this definition">#</a></dt>
<dd><p>Answer questions with a context to the given text files contents by a pretrained LLM model in given pipeline.</p>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py" id="question_answering.question_answering.QuestionHandler">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">question_answering.question_answering.</span></span><span class="sig-name descname"><span class="pre">QuestionHandler</span></span><a class="reference internal" href="question_answering.html#QuestionHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#question_answering.question_answering.QuestionHandler" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class for handling questions answering for a given question type.
This class is used as a base class for all question types, and for default question type (regular question
answering without any special handling).</p>
<dl class="py class">
<dt class="sig sig-object py" id="question_answering.question_answering.QuestionHandler.ConfigKeys">
<em class="property"><span class="pre">class</span> </em><span class="sig-name descname"><span class="pre">ConfigKeys</span></span><a class="reference internal" href="question_answering.html#QuestionHandler.ConfigKeys"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#question_answering.question_answering.QuestionHandler.ConfigKeys" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="question_answering.question_answering.QuestionHandler.answer">
<span class="sig-name descname"><span class="pre">answer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">questions_amount</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batched_input</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_pipeline</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">transformers.Pipeline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_config</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">transformers.GenerationConfig</span></span></em><span class="sig-paren">)</span> → <span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="question_answering.html#QuestionHandler.answer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#question_answering.question_answering.QuestionHandler.answer" title="Permalink to this definition">#</a></dt>
<dd><p>Answer questions with a context to the given text files contents by a pretrained LLM model in given pipeline.</p>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py" id="question_answering.question_answering.QuestionTypes">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">question_answering.question_answering.</span></span><span class="sig-name descname"><span class="pre">QuestionTypes</span></span><a class="reference internal" href="question_answering.html#QuestionTypes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#question_answering.question_answering.QuestionTypes" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="question_answering.question_answering.QuestionTypes.DEFAULT">
<span class="sig-name descname"><span class="pre">DEFAULT</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'default'</span></em><a class="headerlink" href="#question_answering.question_answering.QuestionTypes.DEFAULT" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="question_answering.question_answering.QuestionTypes.POLL">
<span class="sig-name descname"><span class="pre">POLL</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'poll'</span></em><a class="headerlink" href="#question_answering.question_answering.QuestionTypes.POLL" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="question_answering.question_answering.answer_questions">
<span class="sig-prename descclassname"><span class="pre">question_answering.question_answering.</span></span><span class="sig-name descname"><span class="pre">answer_questions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">questions</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device_map</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_kwargs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auto_gptq_exllama_max_input_length</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tokenizer_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tokenizer_kwargs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text_wrapper</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">questions_wrapper</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_config</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">,</span> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">questions_config</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">,</span> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">questions_columns</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> → <span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">pandas.core.frame.DataFrame</span><span class="p"><span class="pre">,</span> </span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="question_answering.html#answer_questions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#question_answering.question_answering.answer_questions" title="Permalink to this definition">#</a></dt>
<dd><p>Answer questions with a context to the given text files contents by a pretrained LLM model. Each text file will have
the following prompt built:</p>
<p>start of <cite>text_wrapper</cite>
&lt;text file content&gt;
end of <cite>text_wrapper</cite></p>
<p>start of <cite>questions_wrapper</cite>
1. &lt;questions[0]&gt;
2. &lt;questions[1]&gt;
…
n. &lt;questions[n-1]&gt;
end of <cite>questions_wrapper</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_path</strong> – A path to a directory of text files or a path to a text file to ask
questions about.</p></li>
<li><p><strong>model_name</strong> – The pre-trained model name from the huggingface hub to use for asking
questions.</p></li>
<li><p><strong>questions</strong> – The questions to ask.
A list of lists of questions to ask per text file, and devided
by question groups, the groups can be dtermained by size (in order to
avoid large inputs to the llm) or by questioning method
(regular or poll like questioning).</p></li>
<li><p><strong>device_map</strong> – A map to use for loading the model on multiple devices.</p></li>
<li><p><strong>model_kwargs</strong> – Keyword arguments to pass for loading the model using HuggingFace’s
<cite>transformers.AutoModelForCausalLM.from_pretrained</cite> function.</p></li>
<li><p><strong>auto_gptq_exllama_max_input_length</strong> – For AutoGPTQ models to set and extend the model’s input buffer size.</p></li>
<li><p><strong>tokenizer_name</strong> – The tokenizer name from the huggingface hub to use. If not given, the
model name will be used.</p></li>
<li><p><strong>tokenizer_kwargs</strong> – Keyword arguments to pass for loading the tokenizer using HuggingFace’s
<cite>transformers.AutoTokenizer.from_pretrained</cite> function.</p></li>
<li><p><strong>text_wrapper</strong> – A wrapper for the file’s text. Will be added at the start of the prompt.
Must have a placeholder (‘{}’) for the text of the file.</p></li>
<li><p><strong>questions_wrapper</strong> – A wrapper for the questions received. Will be added after the text
wrapper in the prompt template. Must have a placeholder (‘{}’) for the
questions.</p></li>
<li><p><strong>generation_config</strong> – HuggingFace’s <cite>GenerationConfig</cite> keyword arguments to pass to the
<cite>generate</cite> method.</p></li>
<li><p><strong>questions_config</strong> – A dictionary or list of dictionaries containing specific ways to answer
questions (using a poll for example), each dictionary in the list is for
corresponding question group and determines the question asking method
for said group.</p></li>
<li><p><strong>batch_size</strong> – Batch size for inference.</p></li>
<li><p><strong>questions_columns</strong> – Columns to use for the dataframe returned.</p></li>
<li><p><strong>verbose</strong> – Whether to present logs of a progress bar and errors. Default: True.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>A tuple of:</p>
<ul class="simple">
<li><p>A dataframe dataset of the questions answers.</p></li>
<li><p>A dictionary of errored files that were not inferred or were not answered properly.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="question_answering.question_answering.open_mpi_handler">
<span class="sig-prename descclassname"><span class="pre">question_answering.question_answering.</span></span><span class="sig-name descname"><span class="pre">open_mpi_handler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">worker_inputs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">root_worker_inputs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="question_answering.html#open_mpi_handler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#question_answering.question_answering.open_mpi_handler" title="Permalink to this definition">#</a></dt>
<dd></dd></dl>
</section>
<section id="module-question_answering">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-question_answering" title="Permalink to this headline">#</a></h2>
</section>
</section>
</div>
</main>
<footer class="footer-article noprint">
<!-- Previous / next buttons -->
<div class="prev-next-area">
</div>
</footer>
</div>
</div>
<div class="footer-content row">
<footer class="col footer"><p>
  
      © Copyright .<br/>
</p>
</footer>
</div>
</div>
</div>
</div>
<!-- Scripts loaded after <body> so the DOM is not blocked -->
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
</body>
</html>